---
title: Cloud App Security でアクティビティを制御するポリシーを作成する
description: この記事では、アクティビティポリシーを作成して使用する手順について説明します。
author: shsagir
ms.author: shsagir
ms.service: cloud-app-security
ms.topic: conceptual
ms.date: 03/01/2020
ms.collection: M365-security-compliance
ms.reviewer: reutam
ms.suite: ems
ms.custom: seodec18
ms.openlocfilehash: 87e25ce39cf7c3858db00af9dbe9d9141de2a48d
ms.sourcegitcommit: 828bbe923713b358fbd32f14e007bf7e5bccedbe
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/01/2020
ms.locfileid: "78207898"
---
# <a name="activity-policies"></a>アクティビティ ポリシー

*適用対象: Microsoft Cloud App Security*

アクティビティポリシーを使用すると、アプリプロバイダーの Api を使用して、さまざまな自動プロセスを適用できます。 これらのポリシーを使用すると、さまざまなユーザーによって実行される特定のアクティビティを監視したり、特定の種類のアクティビティを予期せずに実行したりすることができます。

アクティビティ検出ポリシーを設定すると、アラートの生成が開始されます。アラートは、ポリシーの作成後に発生したアクティビティに対してのみ生成されます。

> [!NOTE]
> 過去7日間に5万件を超える一致をトリガーするポリシーは、自動的に無効になります。 追加のフィルターを追加することによってポリシーの調整を試すことができます。また、レポートのためにポリシーを使用している場合は、代わりに[クエリとして保存](activity-filters-queries.md#activity-queries)することを検討してください。

## <a name="custom-alerts"></a>カスタムアラート

アクティビティポリシーを使用すると、カスタムアラートを送信したり、ユーザーアクティビティが検出されたときにアクションを実行したりできます。 たとえば、次のようにします。

- ユーザーがサインインを試行し、1分で70回失敗する
- ユーザーが7000ファイルをダウンロードする
- ユーザーがアフガニスタンからログインしている

これらのイベントが発生したときに、自分またはユーザーに対して、アクティビティアラートが送信されるように設定できます。 何が起こったかの調査が完了するまで、ユーザーを中断することもできます。

新しいアクティビティポリシーを作成するには、次の手順を実行します。

1. コンソールで、 **[制御]** 、 **[ポリシー]** の順にクリックします。

2. **[ポリシーの作成]** をクリックし、 **[アクティビティポリシー]** を選択します。

     ![アクティビティポリシーメニュー](media/activity-policy-menu.png)

3. ポリシーの名前と説明を指定します。テンプレートに基づいて作成する場合は、ポリシーを使用して[クラウドアプリを制御](control-cloud-apps-with-policies.md)する方法に関する記事を参照してください。

4. このポリシーをトリガーするアクションまたは他のメトリックを設定するには、**アクティビティフィルター**を使用します。
    > [!NOTE]
    > 指定されたフィルターフィールドに値がある場合にのみ結果を含めるようにするに**は、is set** test を使用して同じフィールドを再度追加することをお勧めします。 たとえば、**位置**によるフィルター処理が指定した国の一覧と*等しくない*場合、[**場所**のフィルターを追加する] も*設定さ*れます。 **[結果の編集とプレビュー]** を選択して、フィルターの結果をプレビューすることもできます。
    >
    > ![場所フィールドが設定されているフィルター設定のスクリーンショット](media/activity-example-location-isset.png)

5. **[アクティビティ一致パラメーター]** で、ポリシー違反がトリガーされるタイミングを選択します。 1つのアクティビティがフィルターに一致する場合、または指定された数の**反復アクティビティ**が検出された場合にのみトリガーするように選択します。
    - [アクティビティの**繰り返し**] を選択した場合は、 **1 つのアプリで**を設定できます。 この設定により、同じアプリで繰り返されるアクティビティが発生した場合にのみポリシー一致がトリガーされます。 たとえば、Box から30分以内に5回ダウンロードすると、ポリシー一致がトリガーされます。

6. 一致が見つかったときに実行する**アクション**を構成します。

これらの例を見てみましょう。

- 複数回失敗したログイン

    短い期間に多数のログインで失敗した場合にアラートを受け取るようにポリシーを設定できます。 この種のポリシーを構成するには、 **[新しいアクティビティポリシー]** ページで適切なアクティビティフィルターを選択します。

    **[アクティビティフィルター]** フィールドの下に、アラートがトリガーされるパラメーターを構成します。

    ![複数回失敗したサインイン試行のポリシーの例](media/multiple-failed-log-on-attempts-policy-example.png "複数の失敗したログオン試行ポリシーの例")

- 高いダウンロード率

    ポリシーを設定して、予期しない、または存在しないダウンロードアクティビティのレベルが発生したときにアラートを受け取るようにすることができます。 この種のポリシーを構成するには、[**レート**パラメーター] で、アラートをトリガーするパラメーターを選択します。

    ![高いダウンロード率の例](media/high-download-rate-example.png "高いダウンロード率の例")

## <a name="activity-policy-reference"></a>アクティビティポリシーのリファレンス

このセクションには、ポリシー、各ポリシーの種類の説明、およびポリシーごとに構成できるフィールドに関するリファレンス情報が含まれています。

**アクティビティポリシー**は API ベースのポリシーで、クラウド内の組織のアクティビティを監視できます。 ポリシーでは、デバイスの種類と場所など、20を超えるファイルメタデータフィルターが考慮されます。 ポリシーの結果に基づいて通知が生成され、ユーザーはクラウドアプリから中断できます。
各ポリシーは、次の部分で構成されています。

- アクティビティフィルター-メタデータに基づいて粒度の細かい条件を作成できます。

- アクティビティ一致パラメーター-アクティビティがポリシーに一致すると見なされる回数のしきい値を設定できます。  ポリシーに一致するために必要な反復活動の数を指定します。 たとえば、ユーザーが2分間にログイン試行が10回失敗した場合にアラートを通知するポリシーを設定します。 既定では、* * アクティビティ一致パラメーターを使用すると、すべてのアクティビティフィルターに一致するすべてのアクティビティに対して一致が発生します。

  - **反復アクティビティ**を使用すると、アクティビティがカウントされる期間の反復アクティビティの回数を設定できます。 すべてのアクティビティを同じユーザーと同じクラウドアプリで実行するように指定することもできます。

- アクション–ポリシーには、違反が検出されたときに自動的に適用できる一連のガバナンスアクションが用意されています。

## <a name="next-steps"></a>次のステップ

> [!div class="nextstepaction"]
> [データ保護ポリシー](data-protection-policies.md)

[!INCLUDE [Open support ticket](includes/support.md)]
