---
title: Cloud App Security で使用可能なファイル データとフィルターを理解する
description: このリファレンス記事では、Cloud App Security によって使用されるファイルとファイル フィルターの種類について説明します。
keywords: ''
author: shsagir
ms.author: shsagir
manager: shsagirn
ms.date: 7/7/2019
ms.topic: conceptual
ms.collection: M365-security-compliance
ms.prod: ''
ms.service: cloud-app-security
ms.technology: ''
ms.reviewer: reutam
ms.suite: ems
ms.custom: seodec18
ms.openlocfilehash: 12522fbcdade562d9809ae81efd3d4a2c758033c
ms.sourcegitcommit: 7c93b6f93d2699d466b172590710ed01697bbdad
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/03/2019
ms.locfileid: "74719379"
---
# <a name="files"></a>ファイル

*適用対象: Microsoft Cloud App Security*

Microsoft Cloud App Security は、データ保護を提供するため、接続しているアプリのすべてのファイルを表示します。 アプリ コネクターを使用して Microsoft Cloud App Security をアプリを接続すると、Microsoft Cloud App Security は OneDrive や Salesforce などに格納されたすべてのファイルをスキャンします。 その後、Cloud App Security では、ファイルが変更されるたびに再スキャンが行われます。内容、メタデータ、共有アクセス許可の変更を対象にできます。 スキャン時間は、アプリに格納されたファイルの数によって異なります。 **[ファイル]** ページでは、ファイルをフィルターしてクラウド アプリにどのような種類のデータが保存されているかを調べることもできます。

## <a name="file-filter-examples"></a>ファイル フィルターの例

たとえば、 **[ファイル]** ページを使用して、**機密**のラベルが付いた外部共有ファイルをセキュリティで保護するには、次のようにします。アプリを Cloud App Security に接続した後、Azure Information Protection と統合します。 次に、 **[ファイル]** ページで、**機密**というラベルが付いたファイルをフィルターで抽出し、 **[コラボレーター]** フィルターで自分のドメインを除外します。 自分の組織の外部と共有されている機密ファイルがあることがわかったら、それを検出するファイル ポリシーを作成できます。 **Remove external collaborators (外部コラボレーターの削除)** や**ポリシー一致のダイジェストをファイル所有者へ送信**などの自動ガバナンス アクションをこれらのファイルに適用して、組織のデータが失われるのを防ぐことができます。

![ファイル フィルター [機密]](media/file-filter-confidential.png)

**[ファイル]** ページの使用例をもう 1 つ示します。 過去 6 か月間変更されていないファイルをパブリックまたは外部と共有しているユーザーが組織内にいないことを確認します。アプリを Cloud App Security に接続し、 **[ファイル]** ページに移動します。 アクセス レベルが**外部**または**パブリック**であるファイルをフィルターで抽出し、 **[最終更新日時]** の日付を 6 か月前に設定します。 **[検索に基づく新しいポリシー]** をクリックして、これらの古いパブリック ファイルを検出するファイル ポリシーを作成します。 **外部ユーザーの削除**などの自動ガバナンス アクションをそれらに適用して、組織のデータが失われるのを防ぎます。

![外部の古いファイルをフィルターする](media/file-example-stale-external.png)

ファイルをフィルターするには、まず基本的なフィルターを使うと便利です。

![基本的なファイル ログ フィルター](media/file-log-filter-basic-1.png)

さらに詳細にファイルを絞り込むには、[詳細] をクリックして、基本的なフィルターを拡張します。

![詳細なファイル ログ フィルター](media/file-log-filter-advanced-1.png)

## <a name="Filefilters"></a> ファイル フィルター

Cloud App Security は、20 を超えるメタデータ フィルター (アクセス レベルやファイルの種類など) に基づいてファイルの種類を監視できます。

Cloud App Security に組み込まれている DLP エンジンは、一般的な種類のファイルからテキストを抽出することによって、コンテンツ検査を実行します。 PDF、Office ファイル、RTF、HTML、コード ファイルなどのファイルの種類が含まれます。

以下に示すのは、適用できるファイル フィルターの一覧です。 ポリシーを作成するための強力なツールを提供するために、ほとんどのフィルターでは複数の値と NOT がサポートされています。

> [!NOTE]
> ファイル ポリシー フィルターを使用する場合、 **[が次を含む]** を選択すると、コンマ、ピリオド、スペース、アンダースコアで区切られた**完全に一致する単語**のみが検出されます。
>
> - 単語間をスペースで区切ると、OR のように機能します。たとえば、**malware** **virus** を検索すると、名前に malware または virus が含まれているすべてのファイルが検出されるので、malware-virus.exe と virus.exe の両方が検出されます。
> - 文字列を検索する場合は、単語を引用符で囲みます。 引用符で単語を囲むと、AND のように機能します。たとえば、 **"malware"** **"virus"** を検索すると、virus_malware_file.exe は検出されますが、malwarevirusfile.exe や malware.exe は検出されません。 ただし、検索されるのは正確な文字列のみです。 **"malware virus"** を検索した場合、 **"virus"** や **"virus_malware"** は検出されません。
>
> **[が次と等しい]** を使用して検索すると、完全な文字列のみが検索されます。たとえば、**malware.exe** を検索すると、malware.exe は検出されますが、malware.exe.txt は検出されません。

- **アクセス レベル** – 共有のアクセス レベルです (パブリック、外部、内部、プライベート)。  外部ファイルの詳細については、「[General Setup, Set up the portal](getting-started-with-cloud-app-security.md)」 (一般的なセットアップ、ポータルのセットアップ) を参照してください。

    - **内部** - [一般的な設定](General-setup.md)で設定する内部ドメイン内のすべてのファイルです。
    - **外部** - 設定した内部ドメイン内ではない場所に保存されているファイルです。
    - **共有** - プライベートより高い共有レベルを持つファイルです。 以下が含まれます。
        - 内部共有 - 内部ドメイン内で共有されているファイル。
        - 外部共有 - 内部ドメインにリストされていないドメインで共有されているファイル。
        - Public with a link (リンクによる公開) - リンクによって誰とでも共有できるファイル。
        - 公開 - インターネットを検索することによって見つかるファイル。

      > [!NOTE]
      > 接続済みのストレージ アプリに外部ユーザーが共有するファイルは、Cloud App Security によって次のように処理されます。
      >
      > - **OneDrive:** OneDrive は、外部ユーザーが OneDrive に配置するすべてのファイルの所有者として、内部ユーザーを割り当てます。 これらのファイルは組織によって所有されるものと見なされるため、Cloud App Security はこれらのファイルをスキャンし、OneDrive 内の他のファイル同様にポリシーを適用します。
      > - **Google Drive:** Google Drive はこれらのファイルを外部ユーザーによって所有されているものと見なします。組織が所有していないファイルとデータに対する法的制限のため、Cloud App Security はこれらのファイルにアクセスできません。
      > - **Box:** Box は外部所有ファイルを非公開情報と見なすので、Box のグローバル管理者はファイルの内容を見ることができません。 このため、Cloud App Security はこれらのファイルにアクセスできません。
      > - **Dropbox:** Dropbox は外部所有ファイルを非公開情報と見なすので、Dropbox のグローバル管理者はファイルの内容を見ることができません。 このため、Cloud App Security はこれらのファイルにアクセスできません。

- **アプリ** – これらのアプリ内のファイルのみが検索されます。

- **コラボレーター** – 特定のコラボレーター グループを包含/除外します。

    - **すべてのドメイン** – このドメインのすべてのユーザーがファイルにアクセスできる場合です。

    - **ドメイン全体** – ドメイン全体がファイルにアクセスできる場合です。

    - **グループ** – 特定グループがファイルにアクセスできる場合です。 グループは、Active Directory やクラウド アプリからインポートできるほか、サービスで手動作成することもできます。

    - **ユーザー** – ファイルにアクセスできる特定のユーザーのセットです。

- **作成日時** – ファイルの作成日時です。 フィルターでは指定した日以前/以降、および日付の範囲を設定できます。

- **拡張子** – 特定のファイル拡張子に注目します。 たとえば、実行可能ファイル (exe) であるすべてのファイル、などです。

- **ファイル ID** – 特定のファイル ID を検索します。ファイル ID は、特定の重要ファイルを、ファイルの所有者/場所/名前に頼らずに追跡するための高度な機能です。

- **ファイル名** – クラウド アプリケーションで定義されているファイル名または名前のサブ文字列です。たとえば、ファイル名にパスワードが含まれるすべてのファイル、などです。

- **分類ラベル** - 設定されている特定のタグを持つファイルを検索します。 ラベルは次のいずれかです。
    - **Azure Information Protection のタグ** - これには、Azure Information Protection との統合が必要です。
    - **Cloud App Security のタグ** - スキャンしたファイルへのより多くの分析情報を提供します。 Cloud App Security DLP でスキャンされたファイルごとに、ファイルが暗号化されるか破損しているために検査がブロックされたかどうかがわかります。 たとえば、アラートを生成するポリシーを設定して、外部で共有されているパスワード保護されたファイルの検疫を行うことができます。
        - **Azure RMS 暗号化** – Azure RMS 暗号化が設定されているために内容が検査されなかったファイル。
        - **パスワード暗号化** – ユーザーによってパスワード保護されているために内容が検査されなかったファイル。
        - **ファイルの破損** – 内容の読み取りができなかったため、内容が検査されなかったファイル。

- **ファイルの種類** – Cloud App Security は、サービスから受信した MIME タイプとファイルのスキャンの両方を基にして、実際のファイルの種類を判断します。 このスキャンは、データ スキャンに関連するファイルに対して行われます (ドキュメント、画像、プレゼンテーション、スプレッドシート、テキスト、ZIP/アーカイブ ファイル)。 フィルターは、ファイル/フォルダーの種類ごとに機能します。 たとえば、"... であるすべてのフォルダー" や、"... であるすべてのスプレッドシート ファイル" などです。

    ![policy_file フィルターごみ箱](media/policy_file-filters-trash.png "policy_file フィルターのごみ箱")

- **ごみ箱** – ごみ箱フォルダー内のファイルを除外するか、または含めます。 これらのファイルは引き続き共有できる場合があるため、危険性があります。

- **最終更新日時** – ファイルの変更日時です。 フィルターでは、日付の前後、日付の範囲、および相対的な日時表現がサポートされます。 たとえば、過去 6 か月間に変更されていないすべてのファイル、などです。

- **一致したポリシー** - アクティブな Cloud App Security ポリシーと一致したファイルです。

- **MIME の種類** – ファイルの MIME の種類を確認します。自由なテキストを使用できます。

- **所有者** - 特定のファイル所有者を包含/除外します。 たとえば、rogue_employee_#100 によって共有されているすべてのファイルを追跡します。

- **所有者 OU** – 特定の組織グループに属するファイル所有者を包含または除外します。 たとえば、EMEA_marketing によって共有されたファイルを除くすべてのパブリック ファイル、などです。 Google Drive に格納されているファイルにのみ適用されます。

- **親フォルダー** – 親フォルダーに基づいて包含または除外します。 たとえば、このフォルダー内のファイルを除くすべてのパブリック共有ファイル、などです。

- **検疫済み** – サービスによって検疫されたファイルです。たとえば、検疫されたすべてのファイルを表示できます。

**[適用対象]** フィルターを設定することにより、特定のファイルに対して実行されるようにポリシーを設定することもできます。 **[すべてのファイル]** 、 **[選ばれたフォルダー]** 、または **[選ばれたフォルダーを除くすべてのファイル]** でフィルターします。 その後、関連するファイルまたはフォルダーを選択します。

![フィルターに適用](media/apply-to-filter.png "フィルターへの適用")
<!--
>[!NOTE]
> If at any point you want to clear the filters, you can do so by clicking the clear filters icon ![clear filters icon](media/clear-filters.png).
-->

## <a name="authorizing-files"></a>ファイルの承認

マルウェアまたは DLP リスクの原因としてファイルを特定したら、ファイルを調査することをお勧めし Cloud App Security ます。 ファイルが安全であると判断した場合は、それらを承認できます。 承認したファイルはマルウェアの検出レポートから削除され、このファイルに対する今後の一致が抑制されます。

### <a name="to-authorize-files"></a>ファイルを承認するには

1. Cloud App Security で、 **[コントロール]** をクリックし、 **[ポリシー]** をクリックします。
1. ポリシーの一覧で、調査をトリガーしたポリシーが表示されている行の **カウント** 列で 一致 リンクをクリックします。

    > [!TIP]
    > 種類によってポリシーの一覧をフィルター処理できます。 次の表に、リスクの種類ごとに、使用するフィルターの種類を示します。
    >
    > | リスクの種類 | フィルターの種類 |
    > | --- | --- |
    > | DLP | [ファイル ポリシー] |
    > | マルウェア | マルウェア検出ポリシー |

1. 一致するファイルの一覧で、調査対象のファイルが表示されている行の **[承認]** をクリックします。

## <a name="working-with-the-file-drawer"></a>ファイル ドロワーの使用

ファイル ログでファイル自体をクリックすることにより、各ファイルに関する詳細情報を見ることができます。 をクリックすると、ファイル**ドロアー**が開きます。このファイルでは、次の操作を実行できます。

- **URL** - そのファイルの場所に移動します。
- **ファイル識別子** - ファイル ID と暗号化キーを含むファイルの生データの詳細がポップアップ表示されます。
- **所有者** - このファイルの所有者のユーザー ページが表示されます。
- **一致するポリシー** - ファイルが一致するポリシーの一覧が表示されます。
- **分類ラベル** - このファイルで見つかった Azure Information Protection の分類ラベルの一覧が表示されます。 このラベルに一致するすべてのファイルでフィルター処理することができます。

ファイル ドロワーのフィールドでは、その他のファイルへのコンテキスト リンクが提供されており、ドリルダウンしてドロワーから直接実行することができます。 たとえば、 **[所有者]** フィールドの横にカーソルを移動すると、[フィルターに追加] アイコン ![フィルターに追加](media/add-to-filter-icon.png) を使用して、現在のページのフィルターに所有者をすぐに追加できます。 歯車の [設定] アイコン ![settings icon](media/contextual-settings-icon.png) を使用して、設定ページを直接ポップアップで開き、 **[分類ラベル]** などのフィールドの構成を変更することもできます。

![ファイルドロワー](media/file-drawer.png "ファイル ドロワー")

使用できるガバナンス アクションの一覧については、「[ガバナンス ログ](governance-actions.md#file-governance-actions)」を参照してください。

## <a name="next-steps"></a>次のステップ

> [!div class="nextstepaction"]
> [クラウド環境を保護するための日常的な作業](daily-activities-to-protect-your-cloud-environment.md)

[!INCLUDE [Open support ticket](includes/support.md)]