---
title: "Cloud App Security で使用可能なファイル データとフィルターを理解する | Microsoft ドキュメント"
description: "このリファレンス トピックでは、Cloud App Security によって使用されるファイルとファイル フィルターの種類について説明します。"
keywords: 
author: rkarlin
ms.author: rkarlin
manager: mbaldwin
ms.date: 7/1/2017
ms.topic: article
ms.prod: 
ms.service: cloud-app-security
ms.technology: 
ms.assetid: cadcd6db-05b2-4974-91fe-cfac3d57aecd
ms.reviewer: reutam
ms.suite: ems
ms.openlocfilehash: deabe5b6ccb46ad766ba8e4c206abaf021cd5b72
ms.sourcegitcommit: a0290ac2a662994f7771975ef6c20d0b47e9edd8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/03/2017
---
# <a name="files"></a>ファイル


Cloud App Security は、データ保護を提供するため、接続しているアプリのすべてのファイルを表示します。 アプリ コネクターを使用して Cloud App Security をアプリを接続すると、Cloud App Security は OneDrive や Salesforce などに格納されたすべてのファイルをスキャンします。 その後、Cloud App Security はファイルが変更されるたびに再スキャンを行います。変更はコンテンツ、メタデータ、共有アクセス許可に対して行うことができます。 スキャン時間は、アプリに格納されたファイルの数によって異なります。 **[ファイル]** ページでは、ファイルをフィルターしてクラウド アプリにどのような種類のデータが保存されているかを調べることもできます。 

たとえば、**[ファイル]** ページでは、**機密**のラベルが付いた、外部で共有されているファイルをセキュリティで保護することができます。その場合、Cloud App Security にアプリを接続してから、Azure Information Protection と統合することができます。 次に、**[ファイル]** ページで **機密**のラベルが付いたファイルをフィルターします。 **[グループ作業者]** フィルターで自分のドメインを除外し、組織外で共有されている**機密**ファイルがあることがわかった場合は、不適切なアクセス レベルが適用されている**機密**ファイルを検出するファイル ポリシーを作成して、自動ガバナンス アクションを適用することができます。たとえば、**[Remove external collaborators]** (外部のグループ作業者を削除) や **[Send policy-match digest to file owner]** (ポリシー一致のダイジェストをファイル所有者へ送信) では、組織のデータ損失を防ぐことができます。

 ![ファイル フィルター [機密]](media/file-filter-confidential.png)

ここでは、**[ファイル]** ページのもう 1 つの使用例を示します。 過去 6 か月の間、変更されていないファイルを組織で誰も公開共有または外部共有していないことを確認するには、Cloud App Security にアプリを接続し、**[ファイル]** ページで、アクセス レベルが**[外部]**または**[公開]**であるファイルをフィルターし、**[最終変更]**日を 6 か月前に設定します。 古い公開ファイルを検出するファイル ポリシーを作成する場合は、**[検索に基づく新しいポリシー]** をクリックし、**[外部ユーザーの削除]** などの自動ガバナンス アクションを適用して、組織のデータ損失を防ぎます。

 ![外部の古いファイルをフィルターする](media/file-example-stale-external.png)

ファイルをフィルターするには、まず基本的なフィルターを使うと便利です。

 ![基本的なファイル ログ フィルター](media/file-log-filter-basic.png)

さらに詳細にファイルを絞り込むには、[詳細] をクリックして、基本的なフィルターを拡張します。

 ![詳細なファイル ログ フィルター](media/file-log-filter-advanced.png)
 
###  <a name="Filefilters"></a> ファイル フィルター 
 
Cloud App Security は、20 を超えるメタデータ フィルター (アクセス レベルやファイルの種類など) に基づいてファイルの種類を監視できます。 
 
Cloud App Security に組み込まれている DLP エンジンは、一般的な種類のファイル (PDF、Office ファイル、RTF、HTML、コード ファイルなど) からテキストを抽出することによって、コンテンツ検査を実行します。

以下に示すのは、適用できるファイル フィルターの一覧です。 ほとんどのフィルターでは NOT をはじめとする複数値がサポートされているため、ポリシー作成時の強力なツールとなります。  
> [!NOTE] 
> ファイル ポリシー フィルターを使用する場合、**[が次を含む]** を選択すると、コンマ、ピリオド、スペース、アンダースコアで区切られた**完全に一致する単語**のみが検出されます。 
> - 単語間をスペースで区切ると、OR のように機能します。たとえば、**malware** **virus** を検索すると、名前に malware または virus が含まれているすべてのファイルが検出されるので、malware-virus.exe と virus.exe の両方が検出されます。  
> - 文字列を検索する場合は、単語を引用符で囲みます。 引用符で単語を囲むと、AND のように機能します。たとえば、**"malware"** **"virus"** を検索すると、virus_malware_file.exe は検出されますが、malwarevirusfile.exe や malware.exe は検出されません。 ただし、検索されるのは正確な文字列のみです。 **"malware virus"** を検索した場合、**"virus"** や **"virus_malware"** は検出されません。

>[**が次と等しい**] を使用して検索すると、完全な文字列のみが検索されます。たとえば、**malware.exe** を検索すると、malware.exe は検出されますが、malware.exe.txt は検出されません。 

-   アクセス レベル – アクセス レベルの共有です。Public、外部、内部、Private のレベルがあります。  外部ファイルの詳細については、[「General Setup」 (一般的なセットアップ) ページの 「Set up the portal」 (ポータルのセットアップ)](getting-started-with-cloud-app-security.md) セクションをご覧ください。内部ファイルは、「[一般的なセットアップ](General-setup.md)」で設定する内部ドメイン内のファイルです。 外部ファイルは、設定した内部ドメイン内ではない場所に保存されたファイルです。 共有ファイルは、非公開レベルの上に共有レベルがあるファイルです。これには、内部共有 (内部ドメイン内で共有されるファイル)、外部共有 (内部ドメインの一覧に含まれないドメインで共有されるファイル)、リンクによる公開 (リンクによって誰とでも共有できるファイル)、公開 (インターネットを検索することによって見つかるファイル) が含まれます。 

> [!NOTE]
>  接続済みのストレージ アプリに外部ユーザーが共有するファイルは、Cloud App Security によって次のように処理されます。
> - **OneDrive:** OneDrive は、外部ユーザーが OneDrive に配置するすべてのファイルの所有者として、内部ユーザーを割り当てます。 これらのファイルは組織によって所有されるものと見なされるため、Cloud App Security はこれらのファイルをスキャンし、OneDrive 内の他のファイル同様にポリシーを適用します。
> - **Google Drive:** Google Drive はこれらのファイルを外部ユーザーによって所有されているものと見なします。組織が所有していないファイルとデータに対する法的制限のため、Cloud App Security はこれらのファイルにアクセスできません。
> - **Box:** Box は外部所有ファイルを非公開情報と見なすので、Box のグローバル管理者はファイルの内容を見ることができません。 このため、Cloud App Security はこれらのファイルにアクセスできません。 
> - **Dropbox:** Dropbox は外部所有ファイルを非公開情報と見なすので、Dropbox のグローバル管理者はファイルの内容を見ることができません。 このため、Cloud App Security はこれらのファイルにアクセスできません。

-   アプリ – これらのアプリ内のファイルのみが検索されます。  
  
-   コラボレーター – 特定のコラボレーター グループを追加/除外します。  
  
    -   すべてのドメイン – このドメインのすべてのユーザーがファイルにアクセスできるかどうかを設定します。  
  
    -   ドメイン全体 – ドメイン全体がファイルにアクセスできるかどうかを設定します。  
  
    -   グループ – 特定グループがファイルにアクセスできるかどうかを設定します。 グループは、Active Directory やクラウド アプリからインポートできるほか、サービスで手動作成することもできます。  
  
    -   ユーザー – ファイルにアクセスできる特定の複数ユーザーです。  
  
-   作成日時 – ファイルの作成日時です。 フィルターでは指定した日以前/以降、または日付の範囲を設定できます。  
  
-   拡張子 – 特定のファイル拡張子、たとえば実行可能ファイル (exe) すべてを対象にできます。  
  
-   ファイル ID – 特定のファイル ID を検索します。これは、特定の重要ファイルを、ファイルの所有者/場所/名前に頼らずに追跡するための高度な機能です。  
  
-   ファイル名 – クラウド アプリケーションで定義されているファイル名または名前のサブ文字列です。たとえば、ファイル名にパスワードが含まれるすべてのファイルです。   
  
-   分類ラベル -設定されている特定のタグを持つファイルを検索します。 次のいずれかです。
    - Azure Information Protection タグ。 これには、Azure Information Protection との統合が必要です。
    - Cloud App Security タグ。 スキャンしたファイルへのより多くのインサイトを提供します。 Cloud App Security DLP でスキャンされるファイルごとに、ファイルの暗号化または破損によってファイルの検査がブロックされていないかどうかがわかるようになりました。 たとえば、次のように、アラートを生成するポリシーを設定して、外部で共有されているパスワード保護されたファイルの検疫を行うことができます。 
        - Azure RMS 暗号化 – Azure RMS 暗号化が設定されているために内容が検査されなかったファイル。
        - パスワード暗号化 – ユーザーによってパスワード保護されているために内容が検査されなかったファイル。
        - ファイルの破損 – 内容の読み取りができなかったため、内容が検査されなかったファイル。

-   ファイルの種類 – Cloud App Security は、サービスから受信した MIME タイプとファイルのスキャンの両方を基にして、実際のファイルの種類を判断します。 このスキャンは、データ スキャンに関連するファイルに対して行われることに注意してください (ドキュメント、画像、プレゼンテーション、スプレッドシート、テキスト、zip/アーカイブ ファイル)。 フィルターは、ファイル/フォルダーの種類ごとに行われます。たとえば、... であるすべてのフォルダー、または ... であるすべてのスプレッドシート ファイルなどです。


 ![policy_file filters trash](./media/policy_file-filters-trash.png "policy_file filters trash")  

  
-   ごみ箱 – [ごみ箱] フォルダー内のファイルを除外するか、または含めます。 これらのファイルは引き続き共有できる場合があるため、危険性があります。  
  
-   最終更新日時 – ファイルの変更日時です。 フィルターでは、日付の前/後、日付範囲、および相対的に日にちを指定する言葉で指定できます。たとえば、過去 6 か月間に変更されていないすべてのファイルなどをフィルターできます。  

-   一致したポリシー - アクティブな Cloud App Security ポリシーと一致したファイルです。

-   MIME の種類 – MIME の種類のファイルを確認します。自由書式のテキストを使用できます。  
  
-   所有者 – 特定のファイル所有者を追加/除外します。たとえば、rogue_employee_#100 によって共有されているすべてのファイルを追跡できます。  
  
-   所有者 OU – 特定の組織グループに属するファイル所有者を追加/除外します。たとえば、EMEA_marketing によって共有されたファイルを除くすべてのパブリック ファイルに絞り込めます。  
  
-   親フォルダー – 親フォルダーに基づいて追加/除外します。たとえば、このフォルダー内のファイルを除くすべての公開共有されたファイルに絞り込めます。  
  
-   検疫済み – サービスによって検疫されたファイルです。たとえば、検疫されたすべてのファイルを表示できます。  
  
特定ファイルに対してポリシーが実行されるように設定することもできます。その場合、[**適用先**] フィルターを [All files (すべてのファイル)]、[選択したフォルダー]、または [All files excluding selected folders (選択したフォルダーを除くすべてのファイル)] のいずれかに設定してから、関連するファイルまたはフォルダーを選択します。  
  
![フィルターに適用](./media/apply-to-filter.png "フィルターに適用")  
  
>[!NOTE]
> フィルターをクリアする場合は、フィルター クリア アイコン ![フィルタークリア アイコン](./media/clear-filters.png) をクリックします。

## <a name="working-with-the-file-drawer"></a>ファイル ドロワーの使用

ファイル ログの各ファイルをクリックすると、そのファイルの詳細情報が表示されます。 ファイル ドロワーが開き、そこで、以下の追加アクションをファイルに対して実行できます。

- URL: そのファイルの場所に移動します。
- ファイル識別子: ファイル識別子をクリックすると、ファイル ID と暗号化キーを含むファイルの生データの詳細がポップアップ表示されます。
- 所有者: 所有者をクリックすると、このファイルの所有者のユーザー ページが表示されます。
- 一致するポリシー: [一致するポリシー] リンクをクリックすると、そのファイルが合致するポリシーの一覧が表示されます。
- 分類ラベル: 分類ラベルをクリックすると、このファイルで見つかった Azure Information Protection の分類ラベルの一覧が表示されます。 このラベルに一致するすべてのファイルでフィルター処理することができます。    

ファイル ドロワーのフィールドでは、その他のファイルへのコンテキスト リンクが提供されており、ドリルダウンしてドロワーから直接実行することができます。 たとえば、**[所有者]** フィールドの横にカーソルを移動すると、[フィルターを追加] アイコン ![add to filter](./media/add-to-filter-icon.png) を使用して、現在のページのフィルターに所有者を即時に追加することができます。 歯車の [設定] アイコン ![settings icon](./media/contextual-settings-icon.png) を使用して、設定ページを直接ポップアップで開き、**[分類ラベル]** などのフィールドの構成を変更することもできます。


![ファイル ドロワー](./media/file-drawer.png "ファイル ドロワー")  
  
使用できるガバナンス アクションの一覧については、「[ガバナンス ログ](governance-actions.md#file-governance-actions)」を参照してください。

## <a name="see-also"></a>参照  
[クラウド環境を保護するための日常的な作業](daily-activities-to-protect-your-cloud-environment.md)   
[テクニカル サポートが必要な場合は、Cloud App Security のサポート ページをご利用ください。](http://support.microsoft.com/oas/default.aspx?prid=16031)   
[Premier サポートをご利用のお客様は、Premier ポータルから直接 Cloud App Security を選択することもできます。](https://premier.microsoft.com/)  
  
  
