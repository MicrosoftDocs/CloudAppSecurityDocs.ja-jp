---
title: "クラウド アプリでファイルを監視および保護するためのポリシーを作成する | Microsoft ドキュメント"
description: "このトピックでは、組織のクラウド アプリ使用においてデータとファイルを監視および制御するためのデータ ポリシーを設定する手順について説明します。"
keywords: 
author: rkarlin
ms.author: rkarlin
manager: mbaldwin
ms.date: 11/26/2017
ms.topic: article
ms.prod: 
ms.service: cloud-app-security
ms.technology: 
ms.assetid: ac53fbd6-4d31-4bce-b2bc-9dc65ad83b3e
ms.reviewer: reutam
ms.suite: ems
ms.openlocfilehash: fb64a080a1b74b89be98410fefba5f9821704645
ms.sourcegitcommit: 473d96a6383a6e4d01ef03ed31f2e773cea82cab
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/27/2017
---
# <a name="file-policies"></a>ファイル ポリシー  
ファイル ポリシーでは、クラウド プロバイダーの API を利用して、さまざまな自動プロセスを適用できます。 ポリシーを設定することにより、継続的なコンプライアンスのスキャン、法的な電子情報開示タスク、一般公開された機密コンテンツの DLP、その他多数のユース ケースを実現できます。  
Cloud App Security は、20 を超えるメタデータ フィルター (アクセス レベルやファイルの種類など) に基づいてファイルの種類を監視できます。 
 
**サポートされているファイルの種類** 

Cloud App Security に組み込まれている DLP エンジンは、Office、Open Office、圧縮ファイル、さまざまなリッチ テキスト形式、XML、HTML など、100 を超えるすべての一般的なファイルの種類からテキストを抽出することにより、コンテンツの検査を実行します。

このエンジンは、各ポリシーの 3 つの要素を統合します。  
  
-   設定済みのテンプレートまたはカスタム式に基づくコンテンツのスキャン。  
  
-   ユーザー ロール、ファイルのメタデータ、共有レベル、組織グループの統合、共同作業のコンテキスト、その他のカスタマイズ可能な属性を含むコンテキスト フィルター。  
  
-   自動化されたガバナンスおよび修復アクション。 詳細については、「[制御](control.md)」を参照してください。  
  
ポリシーを有効化すると、クラウド環境を継続的にスキャンし、コンテンツおよびコンテキスト フィルターに一致するファイルを特定して、要求された自動アクションを適用します。 これらのポリシーは、保存中の情報や新しいコンテンツの作成時に違反を検出して修復します。 ポリシーを監視するには、リアルタイムのアラートまたはコンソールから生成されたレポートを使用します。  
  
作成可能なファイル ポリシーの例を以下に示します。  
  
-   ファイルの一般公開  
    クラウド内の一般公開されているファイルに関するアラートを受け取ります。共有レベルがパブリックになっているすべてのファイルを選択します。  
  
-   組織の名前が含まれるファイルの一般公開  
    お客様の組織の名前が含まれ、一般公開されているファイルに関するアラートを受け取ります。 ファイル名にお客様の組織の名前が含まれ、一般公開されているファイルを選択します。  
  
-   外部ドメインとの共有  
    競合他社のドメインなど、特定の外部ドメインが所有するアカウントと共有されているファイルに関するアラートを受け取ります。 共有を制限する外部ドメインを選択します。  
  
-   一定期間変更されていない共有ファイルの検疫  
    最近変更されていない共有ファイルに関するアラートを受け取り、検疫を行うか、自動アクションを有効にします。 指定した期間中に変更されなかったプライベート ファイルはすべて除外します。 G Suite では、ポリシー作成ページの [quarantine file (検疫ファイル)] チェックボックスを使用して、これらのファイルを検疫するように選択できます。  
  
-   承認されていないユーザーとの共有  
    組織内の承認されていないユーザー グループと共有されているファイルに関するアラートを受け取ります。 共有が禁止されているユーザーを選択します。  
  
-   機密性の高いファイル拡張子  
    広く公開される可能性のある、特定の拡張子を持つファイルに関するアラートを受け取ります。 特定の拡張子 (証明書の場合は crt など) またはファイル名を選択し、共有レベルがプライベートになっているファイルを除外します。  
  
新しいファイル ポリシーを作成するには、以下の手順を実行します。  
  
1.  コンソールで、**[制御]**、**[ポリシー]** の順にクリックします。  
  
2.  **[ポリシーの作成]** をクリックして **[ファイル]** ポリシーを選択します。  
  
3.  ポリシーの名前と説明を入力します。この場合、ポリシー テンプレートを使用することもできます。ポリシー テンプレートの詳細については、「[Control cloud apps with policies (ポリシーによるクラウド アプリの制御)](control-cloud-apps-with-policies.md)」を参照してください。  
  
3. ポリシーに**ポリシー重要度**を指定します。 特定のポリシー重要度レベルでポリシーが一致したときに通知を送信するように Cloud App Security を設定している場合、この重要度を利用し、そのポリシーの一致で通知がトリガーされるかどうかを決定します。

4.  **[カテゴリ]** から、最も適切なリスクの種類にポリシーをリンクします。 このフィールドは、情報提供のみを目的としたもので、後からリスクの種類に基づいて特定のポリシーやアラートを検索する場合に役立ちます。  リスクは、ポリシーを作成したカテゴリに応じて、既に選択されている可能性があります。 既定では、ファイル ポリシーは DLP に設定されています。  
  
5.  検出された場合にこのポリシーをトリガーするアプリを設定するには、**[このポリシーの対象となるファイルのためのフィルターを作成]** を選択します。 ポリシーを実行する対象ファイルが正確に表示されるまで、ポリシー フィルターの条件を絞り込みます。 誤検知を回避するために、可能な限り限定してください。 たとえば、パブリックのアクセス許可を削除するには、**パブリック** フィルターを追加し、外部ユーザーを削除するには、"外部" フィルターを使用します。  
> [!NOTE] 
> ポリシー フィルターを使用する場合、**[が次を含む]** を選択すると、コンマ、ピリオド、スペース、アンダースコアで区切られた完全に一致する単語のみが検索されます。 たとえば、**malware** または **virus** を検索する場合、virus_malware_file.exe は検出されますが、malwarevirusfile.exe は検出されません。 **malware.exe** を検索すると、ファイル名に malware または exe のいずれかを含むすべてのファイルが検出されますが、**"malware.exe"** (二重引用符を含む) を検索すると、malware.exe がそのまま名前に含まれるファイルのみが検出されます。 **[が次と等しい]** を使用して検索すると、完全な文字列のみが検索されます。たとえば、**malware.exe** を検索すると、malware.exe は検出されますが、malware.exe.txt は検出されません。  
6.   最初の **[適用先]** フィルターで、Box、SharePoint、Dropbox、OneDrive に対して **[選択したフォルダー]** または **[All files excluding selected folders (選択したフォルダーを除くすべてのファイル)]** を選択します。アプリ内または特定のフォルダー内の全ファイルにファイル ポリシーを強制できます。 クラウド アプリのログオンにリダイレクトされます。関連フォルダーを追加します。  

6. 2 つ目の **[適用先]** フィルターで、**[すべてのファイル所有者]**、**[選択されたユーザー グループのファイル所有者]**、**[選択されたグループを除くすべてのファイル所有者]** のいずれかを選択し、関連するユーザー グループを選択し、ポリシーに含めるユーザーとグループを決定します。
  
7.  **[コンテンツ検査方法]** を選択します。 組み込み DLP では、ファイルを内容によってフィルタリングできます。 ファイルの内容をスキャンする場合は、次に **[組み込み DLP]** を選択します。 コンテンツ検査を有効にしたら、事前設定されている式を使用するか、他のカスタマイズされた式 (部分文字列または独自の[正規表現](working-with-the-regex-engine.md)) を検索できます。  
    また、正規表現を指定して、結果からファイルを除外することもできます。 これは、内部分類キーワード標準をポリシーから除外する場合に非常に便利です。  
    ファイルが違反と見なされる前に、一致する必要のあるコンテンツ違反の最小数を設定できます。 たとえば、最低 10 個のクレジット カード番号が検出されたファイルについてアラートを受け取る場合は、10 を選択します。  
    選択された式とコンテンツが一致すると、違反テキストが "X" 文字に置き換えられます。 既定では、違反は完全にマスクされており、コンテキストの違反の前後の 100 文字が示されています。 式のコンテキスト内の数字は "#" 文字に置き換えられ、Cloud App Security 内に保存されることはありません。 **[Unmask the last 4 characters of a violation ]**\(違反の最後の 4 文字のマスクを解除する) オプションを選択すると、違反自体の最後の 4 文字のマスクを解除することができます。 正規表現で検索するデータ型 (コンテンツ、メタデータ、またはファイル名) を設定する必要があります。 既定では、コンテンツとメタデータが検索されます。 検索するデータ型を少なくとも 1 つ選択する必要があります。選択しないと、正規表現が機能できず、ポリシーを作成できませんので注意してください。 
  
8.  Cloud App Security で一致が検出された場合に実行する **[ガバナンス]** アクションを選択します。  
  
9. 作成したポリシーは、**[ファイル ポリシー]** タブに表示されます。ポリシーはいつでも編集して、フィルターを調整したり、自動アクションを変更したりできます。 ポリシーは作成時に自動的に有効化され、すぐにクラウド ファイルのスキャンを開始します。  ガバナンス アクションを設定する場合には十分に注意してください。ファイルへのアクセス許可が失われ、元に戻せなくなる可能性があります。 検索フィールドを使用して、ポリシーを実行する対象ファイルのみが表示されるようにフィルター条件をフィルタリングすることをお勧めします。 フィルター条件を絞り込むほど、適切な結果が得られます。 フィルター セクションの **結果の編集とプレビュー** ボタンを使用すると結果を確認できます。  
  
   ![ファイル ポリシーの編集と結果のプレビュー](./media/file-policy-edit-and-preview-results.png "ファイル ポリシーの編集と結果のプレビュー")  
  
10. ファイル ポリシーの一致 (ポリシーに違反する可能性があるファイル) を表示するには、**[制御]** をクリックして、**[ポリシー]** をクリックします。 上部にある **[種類]** フィルターを使用して、ファイル ポリシーだけを表示するように結果をフィルター処理します。 各ポリシーの一致に関する詳細については、ポリシーをクリックします。 ポリシーに対して現在一致しているファイルが表示されます。 **[履歴]** タブをクリックすると、ポリシーに一致したファイルの履歴が最大過去 6 か月まで表示されます。     
  
## <a name="file-policy-reference"></a>ファイル ポリシーの参照  
このセクションでは、各ポリシーの種類、ポリシーごとに設定できるフィールドなど、ポリシーの詳細を説明します。 
  
**ファイル ポリシー**は、クラウド内にある組織のコンテンツを制御できる API ベースのポリシーであり、20 以上のファイル メタデータ フィルター (所有者レベルと共有レベルを含む) の他、コンテンツ検査の結果も考慮されます。 ポリシーの結果に基づいて、ガバナンス アクションを適用できます。 コンテンツ検査エンジンは、アンチマルウェア ソリューションと同様にサードパーティの DLP エンジンを使用しても拡張できます。  
  
各ポリシーは、次の部分で構成されます。  
  
-   ファイル フィルター – メタデータに基づいた詳細の条件を作成できます。  
  
-   コンテンツ検査 – DLP エンジンの結果に基づいてポリシーを絞り込むことができます。 カスタム式、または事前設定された式を含めることができます。 除外リストの設定および一致数の選択が可能です。 匿名化を使用してユーザー名をマスクすることもできます。 
  
-   アクション – ポリシーにガバナンス アクションが複数記載されており、違反が発見されたときにこれらのアクションが自動的に適用されます。  アクションは、コラボレーション アクション、セキュリティ アクション、調査アクションに分かれます。

-   Extensions  
   
    -  コンテンツ検査はサードパーティ エンジン経由で実行でき、DLP またはマルウェア対策機能が向上します。  
  
    -  [ガバナンス アクション](governance-actions.md)はサードパーティ エンジン経由で実行でき、カスタム暗号化コントロールまたはその他の種類のファイル処理 (たとえばカスタムのウォーター マーキング) を実行できます。  
  
## <a name="see-also"></a>参照  
[クラウド環境を保護するための日常的な作業](daily-activities-to-protect-your-cloud-environment.md)   
[テクニカル サポートが必要な場合は、Cloud App Security のサポート ページをご利用ください。](http://support.microsoft.com/oas/default.aspx?prid=16031)   
[Premier サポートをご利用のお客様は、Premier ポータルから直接 Cloud App Security を選択することもできます。](https://premier.microsoft.com/)  
  
  