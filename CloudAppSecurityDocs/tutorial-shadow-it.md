---
title: シャドウ IT の検出と管理を行う
description: このチュートリアルでは、Microsoft Cloud App Security で Azure Information Protection 分類ラベルを自動的に適用するプロセスについて説明します。
ms.date: 06/29/2020
ms.topic: tutorial
ms.openlocfilehash: 2f6da5a282aea312fa08be91be4b1195d36ffd50
ms.sourcegitcommit: 7fc4d916a43d188b1aa4e3cee2e8bd1de230d135
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/14/2021
ms.locfileid: "98206561"
---
# <a name="tutorial-discover-and-manage-shadow-it-in-your-network"></a>チュートリアル:ネットワーク内のシャドウ IT の検出と管理

[!INCLUDE [Banner for top of topics](includes/banner.md)]

IT 管理者に、従業員が使用していると考えられるクラウド アプリの数をたずねた場合、平均で 30 から 40 と答えます。しかし実際には、組織内の従業員によって使用されている個別のアプリの平均数は 1000 を超えています。 Shadow IT は、使用されているアプリとそのリスク レベルを把握し、特定するのに役立ちます。 従業員の 80% は、誰もレビューしていない未承認のアプリを使用しており、セキュリティとコンプライアンスのポリシーに準拠していない可能性があります。 また、従業員は企業ネットワークの外部からリソースやアプリにアクセスできるので、ファイアウォールに関するルールやポリシーだけでは不十分になっています。

このチュートリアルでは、Cloud Discovery を使用して、使用されているアプリを検出し、これらのアプリのリスクを調査して、使用されている新しい危険なアプリを特定するポリシーを構成し、プロキシまたはファイアウォール アプライアンスを使用してこれらのアプリをネイティブでブロックするために未承認にする手順について説明します。

> [!div class="checklist"]
>
> * シャドウ IT の検出と識別
> * 評価と分析
> * アプリを管理する
> * 高度なシャドウ IT の検出レポート
> * 承認済みのアプリの制御

## <a name="how-to-discover-and-manage-shadow-it-in-your-network"></a>ネットワークでシャドウ IT を検出して管理する方法

このプロセスを使用して、組織にシャドウ IT Cloud Discovery をロール アウトします。

![シャドウ IT ライフサイクル](media/shadow-it-lifecycle.png)

### <a name="phase-1-discover-and-identify-shadow-it"></a>フェーズ 1:シャドウ IT の検出と識別

1. **シャドウ IT の検出**:組織で Cloud Discovery を実行して組織のセキュリティ体制を特定し、実際にネットワークで何が起こっているかを確認します。 詳細については、「[Cloud Discovery の設定](set-up-cloud-discovery.md)」をご覧ください。 これを行うには、次のいずれかの方法を使用します。

    * [Microsoft Defender for Endpoint](mde-integration.md) と統合すると、Cloud Discovery がすばやく起動します。 このネイティブ統合により、ネットワークのオンとオフを切り替えて、Windows 10 デバイス間でクラウド トラフィックに関するデータの収集をすぐに開始できます。

    * ネットワークに接続されているすべてのデバイスをカバーするために、ファイアウォールやその他のプロキシに [Cloud App Security ログ コレクター](discovery-docker.md)をデプロイしてエンドポイントからデータを収集し、分析のために Cloud App Security に送信することが重要です。

    * Cloud App Security をプロキシと統合します。 Cloud App Security は、[Zscaler](zscaler-integration.md) を含む一部のサードパーティ プロキシとネイティブに統合されます。

ポリシーはユーザー グループ、地域、およびビジネス グループ間で異なるため、これらのユニットごとに専用のシャドウ IT レポートを作成することをお勧めします。 詳細については、「[オンプレミスの Windows 上の Docker](discovery-docker-windows.md#continuous-reports)」を参照してください。

これで、ネットワーク上で Cloud Discovery が実行されるようになったので、生成される継続的レポートを確認し、[Cloud Discovery ダッシュボード](working-with-cloud-discovery-data.md)を確認して、組織内で使用されているアプリの全体像を把握します。 承認済みのアプリによって対処されなかった職場関連の正当な目的で、未承認のアプリが使用されていることが多いので、カテゴリ別に調べることをお勧めします。

1. **アプリのリスク レベルの特定**:Cloud App Security のクラウド アプリ カタログを使用して、検出された各アプリに関連するリスクをさらに深く調べます。 Cloud App Security のリスク カタログには、80 以上のリスク要因を使用して評価された 16,000 以上のアプリが含まれています。 リスク要因は、アプリに関する一般的な情報 (アプリの本社、発行者) から、セキュリティの手段と制御 (保存時の暗号化のサポート、ユーザー アクティビティの監査ログの提供) までさまざまです。 詳細については、「[リスク スコアの操作](risk-score.md)」を参照してください。

    * Cloud App Security ポータルの **[検出]** で、 **[検出されたアプリ]** をクリックします。 組織内で検出されたアプリの一覧を、懸念しているリスク要因でフィルター処理します。 たとえば、高度なフィルターを使用して、リスク スコアが 8 未満のすべてのアプリを検索できます。

    * アプリをドリルダウンして、そのコンプライアンスを詳しく把握することができます。そのためには、アプリ名をクリックした後、 **[情報]** タブをクリックして、アプリのセキュリティのリスク要因に関する詳細を表示します。

### <a name="phase-2-evaluate-and-analyze"></a>フェーズ 2:評価と分析

1. **コンプライアンスの評価**:アプリが組織の標準 (HIPAA、SOC2、GDPR など) に準拠していると認定されているかどうかを確認します。

    * Cloud App Security ポータルの **[検出]** で、 **[検出されたアプリ]** をクリックします。 組織内で検出されたアプリの一覧を、懸念されるリスク要因でフィルター処理します。 たとえば、推奨されるクエリを使用して、非準拠のアプリを除外します。

    * アプリをドリルダウンして、そのコンプライアンスを詳しく把握することができます。そのためには、アプリ名をクリックした後、 **[情報]** タブをクリックして、アプリのコンプライアンスのリスク要因に関する詳細を表示します。

    > [!TIP]
    > 組み込みの **[アプリのセキュリティ侵害が検出されました]** アラートを利用し、検出されたアプリが最近公開されたセキュリティ違反に関連付けられたときに通知されます。 過去 90 日以内で違反アプリにアクセスしたあらゆるユーザー、IP アドレス、デバイスを調査し、関連するコントロールを適用します。

1. **使用状況の分析**:これで、組織でアプリを使用するかどうかを判断できたので、そのアプリを使用しているユーザーとその使用状況を調査する必要があります。 アプリが組織内の限られた方法でのみ使用されている場合は、問題ないかもしれませんが、使用量が増えている場合は、アプリをブロックするかどうかを決定するために、通知されるようにすることをお勧めします。

    * Cloud App Security ポータルの **[検出]** で、 **[検出されたアプリ]** をクリックし、調査する特定のアプリをクリックしてドリルダウンします。 **[使用]** タブでは、アプリを使用しているアクティブ ユーザーの数と、そのアプリで生成されているトラフィックの量を確認できます。 これにより、アプリで何が起きているかを簡単に把握することができます。 その後、アプリを使用しているユーザーを確認する場合は、 **[アクティブ ユーザーの合計数]** をクリックしてさらにドリルダウンできます。 この重要な手順では、関連する情報を取得できます。たとえば、特定のアプリのすべてのユーザーがマーケティング部門に属していることが特定された場合、このアプリには業務上のニーズがある可能性があり、リスクが高い場合は、このアプリをブロックする前に代替手段について話し合う必要があります。

    * 検出されたアプリの使用を調査する場合は、さらに詳しく調べます。 サブドメインとリソースを表示して、クラウド サービス内の特定のアクティビティ、データ アクセス、リソースの使用状況について確認します。 詳細については、「[検出されたアプリの詳細情報](discovered-apps.md#deep-dive-into-discovered-apps)」と「[リソースとカスタム アプリを検出する](discovered-apps.md#discover-resources-and-custom-apps)」をご覧ください。

1. **代替アプリの特定**:クラウド アプリ カタログを使用して、検出されたリスクの高いアプリと同様のビジネス機能を実現しつつ組織のポリシーにも準拠する、より安全なアプリを識別します。 これを行うには、高度なフィルターを使用して、さまざまなセキュリティ コントロールに対応する同じカテゴリのアプリを検索します。

### <a name="phase-3-manage-your-apps"></a>フェーズ 3:アプリを管理する

* **クラウド アプリの管理**:Cloud App Security は、組織内でのアプリの使用を管理するプロセスに役立ちます。 組織で使用されているさまざまなパターンと動作を特定したら、ビジネスの状態や理由に基づいて各アプリを分類するために、新しいカスタム アプリ タグを作成できます。 これらのタグは、特定の監視目的に使用できます。たとえば、危険なクラウド ストレージ アプリとしてタグ付けされたアプリに送信される大量のトラフィックを特定します。 アプリ タグは、 **[Cloud Discovery の設定]**  >  **[アプリ タグ]** で管理できます。 これらのタグは、Cloud Discovery のページでのフィルター処理や、ポリシーの作成に使用できます。

* **Azure Active Directory (Azure AD) ギャラリーを使用して検出されたアプリを管理する**<a name ="gallery-apps"></a>:Cloud App Security では、Azure AD ギャラリーで検出されたアプリを管理できるようにするために、Azure AD とのネイティブ統合も活用されます。 Azure AD ギャラリーに既に表示されているアプリの場合は、シングル サインオンを適用し、Azure AD でアプリを管理できます。 これを行うには、関連するアプリが表示されている行の行末の 3 つの点を選択し、 **[Manage app with Azure AD]\(Azure AD でアプリを管理する\)** を選択します。

    ![Azure AD ギャラリーでのアプリの管理](media/manage-app-in-azure-ad-gallery.png)

* **継続的監視**:これで、アプリを十分に調査したので、アプリを監視し、必要に応じて制御するためのポリシーを設定することができます。

次に、懸念される問題が発生したときに自動的にアラートが送信されるように、ポリシーを作成します。 たとえば、懸念されるアプリからのダウンロードやトラフィックが急増したときに通知されるよう、**アプリ検出ポリシー** を作成することができます。 これを実現するには、 **[Anomalous behavior in discovered users policy]\(検出されたユーザー ポリシーの異常な動作\)** 、 **[クラウド ストレージ アプリのコンプライアンス チェック]** 、および **[新しい危険なアプリ]** を有効にする必要があります。 また、メールまたはテキスト メッセージでご自分に通知されるようにポリシーを設定する必要があります。 詳細については、「[ポリシー テンプレート リファレンス](policy-template-reference.md)」や、「[Cloud Discovery ポリシー](cloud-discovery-policies.md)」と[アプリ検出ポリシー](cloud-discovery-policies.md)の構成をご覧ください。

アラート ページを表示し、 **[ポリシーの種類]** フィルターを使用して、アプリ検出アラートを確認します。 アプリ検出ポリシーと一致したアプリの場合は、業務でそのアプリを使用する理由を詳しく知るため、アプリのユーザーに連絡するなどしてさらに調査することをお勧めします。 次に、フェーズ 2 の手順を繰り返して、アプリのリスクを評価します。 その後、アプリケーションの次のステップ: 今後の使用を承認するか、またはユーザーが次回アクセスしたときにブロックするかを決定します。後者の場合は、ファイアウォール、プロキシ、またはセキュリティ保護された Web ゲートウェイを使用してブロックできるように、アプリを未承認としてタグ付けする必要があります。 詳細については、[Microsoft Defender for Endpoint との統合](mde-integration.md#block-access-to-unsanctioned-cloud-apps)、[Zscaler との統合](zscaler-integration.md)、[iboss との統合](iboss-integration.md)に関するページと、「[ブロック スクリプトをエクスポートして検出されたアプリを管理する](governance-discovery.md#export-a-block-script-to-govern-discovered-apps)」をご覧ください。

### <a name="phase-4-advanced-shadow-it-discovery-reporting"></a>フェーズ 4:高度なシャドウ IT の検出レポート

Cloud App Security で使用できるレポート オプションに加えて、Cloud Discovery ログを Azure Sentinel に統合して、さらなる調査と分析を行うことができます。 データが Azure Sentinel 内にあれば、それをダッシュボードで表示したり、Kusto クエリ言語を使用してクエリを実行したり、Microsoft Power BI にクエリをエクスポートしたり、他のソースと統合したり、カスタム アラートを作成したりすることができます。 詳細については、[Azure Sentinel の統合](siem-sentinel.md)に関する記事をご覧ください。

### <a name="phase-5-control-sanctioned-apps"></a>フェーズ 5:承認済みのアプリの制御

1. API を使用してアプリの制御を有効にするには、継続的な監視のために [API 経由でアプリを接続します](enable-instant-visibility-protection-and-governance-actions-for-your-apps.md)。

2. [アプリの条件付きアクセス制御](proxy-intro-aad.md)を使用して、アプリを保護します。

クラウド アプリの特性として、それらは日々更新され、新しいアプリが絶え間なく出現します。 このため、従業員は新しいアプリを常に使用しており、ポリシーの追跡、確認、更新、ユーザーが使用しているアプリの確認、およびその使用状況と動作のパターンの確認を継続的に行うことが重要です。 いつでも Cloud Discovery ダッシュボードにアクセスして、使用されている新しいアプリを確認し、再びこの記事の手順に従って、組織とデータが保護されていることを確認することができます。

## <a name="see-also"></a>関連項目

> [!div class="nextstepaction"]
> [クラウド環境を保護するための日常的な作業](daily-activities-to-protect-your-cloud-environment.md)

[!INCLUDE [Open support ticket](includes/support.md)]  
